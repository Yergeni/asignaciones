{% extends "::base.html.twig" %}

{% block body %}
    {{ parent() }}
    {# Mensajes de session enviados #}
    {{ include("CURSOUserBundle:User:messages/success.html.twig") }}
    
	<div class="container">
		<div class="col-md-12">
			<div class="page-header margin-none">
				<h2 class="padding-none">{% trans %}Users{% endtrans %}</h2>{# El texto User ya esta traducido en el archivo de traduccion asi que no ahi que volverlo hacer #}
			</div>
			<div class="table-responsive">
			{# total items count #}
            <div class="count">
               Total records: {{ paginacion.getTotalItemCount }}
            </div>
				<table class="table table-striped table-hover">
					<thead>
						<tr>
						    {# sorting of properties based on query components #}
						    <th>{{ knp_pagination_sortable(paginacion, 'Username'|trans, 'u.username') }}</th> 
                            <th>{{ knp_pagination_sortable(paginacion, 'First name' | trans, 'u.firstName') }}</th>
                            <th>{{ knp_pagination_sortable(paginacion, 'Last name' | trans, 'u.lastName') }}</th>
                            <th>{{ knp_pagination_sortable(paginacion, 'Email' | trans, 'u.email') }}</th>
                            <th>{{ knp_pagination_sortable(paginacion, 'Role' | trans, 'u.role') }}</th>
                            <th>{{ knp_pagination_sortable(paginacion, 'Created' | trans, 'u.createdAt') }}</th>
                            <th>{{ knp_pagination_sortable(paginacion, 'Updated' | trans, 'u.updatedAt') }}</th>
                            <th>{{ 'Actions' | trans }}</th>
						</tr>
					</thead>
					<tbody>
				        {% for user in paginacion %}
                            <tr>
                                <td>{{ user.username }}</td>
                                <td>{{ user.firstName }}</td>
                                <td>{{ user.lastName }}</td>
                                <td>{{ user.email }}</td>
                                <td>
                                    {% if user.role == 'ROLE_ADMIN' %}
                                        <strong>{{ 'Administrator' | trans }}</strong>
                                    {% elseif user.role == 'ROLE_USER' %}
                                        <strong>{{ 'User' | trans }}</strong>
                                    {% endif %}
                                </td>
                                <td>{{ user.createdAt|date('d-m-Y H:i') }}</td>
                                <td>{{ user.updatedAt|date('d-m-Y H:i') }}</td>
				                <td class="actions">
			                        <a href="{{ path('user_view', {'id': user.id}) }}" class="btn btn-sm btn-info">
			                            view
			                        </a>

			                        <a href="{{ path('user_edit', {'id': user.id}) }}" class="btn btn-sm btn-primary">
			                            edit
			                        </a>

			                        {#<a href="{{ path('user_delete', {'id': user.id}) }}" class="btn btn-sm btn-danger btn-delete">
			                            delete
			                        </a>#}
				                </td>
                            </tr>
				        {% endfor %}
					</tbody>
				</table>
				{# display navigation #}
                <div class="navigation">
                    {{ knp_pagination_render(paginacion) }}
                </div>
			</div>
		</div>
	</div>
{% endblock %}


{#
{% block title %}Curso User List{% endblock %}

{% block body %}
<h2>Welcome to the User List</h2>

<table align="center" border="1">
    <thead>
        <tr>
            <th>Username</th>
            <th>Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Status</th>
            <th>Created</th>
            <th>Updated</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.firstName }}</td>
            <td>{{ user.lastName }}</td>
            <td>{{ user.email }}</td>
            <td>
                {% if user.role == 'ROLE_ADMIN' %}
                    <strong>Administrator</strong>
                {% elseif user.role == 'ROLE_USER' %}
                    <strong>User</strong>
                {% endif %}
            </td>
            <td>
                {% if user.isActive == 1 %}
                    Activated
                {% else %}
                    Unable
                {% endif %}
            </td>
            {# <td>{{ user.isActive }}</td>
            <td>{{ user.createdAt | date("d-m-Y H:i") }}</td>
            <td>{{ user.updatedAt | date("F jS Y \\a\\t g:ia") }}</td>
            <td>
                <a href="{{ path('user_view', {'id': user.id}) }}">View</a>
                <a href="#">Edit</a>
                <a href="#">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %} #}
